$(function(){function a(){i(),d(),e(),t()}function t(){var a=$(".flow-show .gallery-wrap"),t=$(".flow-show .prev-btn"),e=$(".flow-show .next-btn"),i=parseInt(a.attr("viewind")),l=parseInt(a.attr("maxviewind"));0==l?(t.addClass("disable"),e.addClass("disable")):i==l?(t.removeClass("disable"),e.addClass("disable")):0==i?(t.addClass("disable"),e.removeClass("disable")):(t.removeClass("disable"),e.removeClass("disable"))}function e(){$(".flow-show .prev-btn").click(function(a){a.preventDefault();var e=$(this),i=$(".flow-show .gallery-wrap"),l=$(".data-cell-list"),d=l.find("li"),s=parseInt(l.css("left")),n=parseInt(i.attr("viewind")),o=(parseInt(i.attr("maxviewind")),d.width()+1);d.length>4&&n>0&&(e.removeClass("disable"),$(".data-cell-list, .flow-date-inner").animate({left:s+4*o},300,function(){t()}),i.attr("viewind",n-1))}),$(".flow-show .next-btn").click(function(a){a.preventDefault();var e=$(this),i=$(".flow-show .gallery-wrap"),l=$(".data-cell-list"),d=l.find("li"),s=parseInt(l.css("left")),n=parseInt(i.attr("viewind")),o=parseInt(i.attr("maxviewind")),r=d.width()+1;d.length>4&&o>n?(e.removeClass("disable"),$(".data-cell-list, .flow-date-inner").animate({left:s-4*r},300,function(){t()}),i.attr("viewind",n+1)):e.addClass("disable")})}function i(){var a=$(".flow-show .gallery-wrap");if(a.attr("viewind",0),a.get(0)){var t=a.find(".data-cell-list"),e=a.attr("data-source");if(e=$.parseJSON(e),e.length>0){t.empty();for(var i=0,d=0;d<e.length;d++){var s=e[d],n=$('<li class="available">                                            <div class="data-cell"><div class="used-cell"></div><div class="data-text">'+s.totalData+'</div></div>                                            <div class="device-cell"><i class="shebei icon iconfont">&#xf001e;</i>Ã—'+s.deviceNum+"</div>                                        </li>").appendTo(t);for(var o in s)n.attr(o,s[o]);i+=n.width()+1}if(e.length%4)for(var d=0;d<4-e.length%4;d++){var n=$('<li>                                            <div class="data-cell"></div>                                            <div class="device-cell"></div>                                        </li>').appendTo(t);i+=n.width()+1}t.width(i),a.attr("maxviewind",t.find("li").length/4-1);var r=t.find("li").eq(0);r.find(".data-text").text([r.attr("useddata"),r.attr("totaldata")].join("/")),r.find(".used-cell").css({width:parseInt(r.attr("useddata"))/parseInt(r.attr("totaldata"))*r.width()})}l()}}function l(){var a=$(".flow-show"),t=$(".flow-show .gallery-wrap"),e=t.find("li.available"),i=parseInt(t.attr("maxviewind")),l=$('<div class="flow-date-wrap"></div>').appendTo(".flow-show").css({position:"absolute",width:a.width(),height:16,overflow:"hidden",top:60,left:0}),d=$('<div class="flow-date-inner"></div>').appendTo(l).css({position:"absolute",width:a.width()*(i+1),height:16,overflow:"hidden",top:0,left:0});e.each(function(a,t){var i=$(t),l=i.position();$('<div class="flow-date">'+i.attr("fromdate")+"</div>").css({left:l.left+18,top:0}).appendTo(d),a==e.length-1&&$('<div class="flow-date">'+i.attr("enddate")+"</div>").css({left:l.left+18+i.width(),top:0}).appendTo(d)})}function d(){}a()});